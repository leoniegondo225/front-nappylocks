{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/nappy-locks-front-end-development%20%282%29/hooks/use-toast.ts"],"sourcesContent":["'use client'\n\n// Inspired by react-hot-toast library\nimport * as React from 'react'\n\nimport type { ToastActionElement, ToastProps } from '@/components/ui/toast'\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: 'ADD_TOAST',\n  UPDATE_TOAST: 'UPDATE_TOAST',\n  DISMISS_TOAST: 'DISMISS_TOAST',\n  REMOVE_TOAST: 'REMOVE_TOAST',\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType['ADD_TOAST']\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType['UPDATE_TOAST']\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType['DISMISS_TOAST']\n      toastId?: ToasterToast['id']\n    }\n  | {\n      type: ActionType['REMOVE_TOAST']\n      toastId?: ToasterToast['id']\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: 'REMOVE_TOAST',\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case 'ADD_TOAST':\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case 'UPDATE_TOAST':\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t,\n        ),\n      }\n\n    case 'DISMISS_TOAST': {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t,\n        ),\n      }\n    }\n    case 'REMOVE_TOAST':\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, 'id'>\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: 'UPDATE_TOAST',\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: 'DISMISS_TOAST', toastId: id })\n\n  dispatch({\n    type: 'ADD_TOAST',\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: 'DISMISS_TOAST', toastId }),\n  }\n}\n\nexport { useToast, toast }\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 161, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/nappy-locks-front-end-development%20%282%29/hooks/useAuthSafe.ts"],"sourcesContent":["// hooks/useAuthSafe.ts\r\n\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { useAuthStore } from \"@/lib/auth-store\"\r\n\r\nexport const useAuthSafe = () => {\r\n  const [isHydrated, setIsHydrated] = useState(false)\r\n\r\n  // La méthode officielle de Zustand pour détecter l'hydratation\r\n  useEffect(() => {\r\n    const unsub = useAuthStore.persist.onHydrate(() => {})\r\n    useAuthStore.persist.onFinishHydration(() => {\r\n      setIsHydrated(true)\r\n    })\r\n\r\n    // Si déjà hydraté (rare mais possible)\r\n    if (useAuthStore.persist.hasHydrated()) {\r\n      setIsHydrated(true)\r\n    }\r\n\r\n    return () => unsub()\r\n  }, [])\r\n\r\n  const user = useAuthStore(s => s.user)\r\n  const token = useAuthStore(s => s.token)\r\n  const isAuthenticated = useAuthStore(s => s.isAuthenticated)\r\n\r\n  return {\r\n    user,\r\n    token,\r\n    isAuthenticated: isHydrated ? isAuthenticated : false,\r\n    isLoading: !isHydrated,\r\n  }\r\n}"],"names":[],"mappings":"AAAA,uBAAuB;;;;;AAGvB;AACA;AAHA;;;AAKO,MAAM,cAAc;IACzB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAE7C,+DAA+D;IAC/D,IAAA,kNAAS,EAAC;QACR,MAAM,QAAQ,oIAAY,CAAC,OAAO,CAAC,SAAS,CAAC,KAAO;QACpD,oIAAY,CAAC,OAAO,CAAC,iBAAiB,CAAC;YACrC,cAAc;QAChB;QAEA,uCAAuC;QACvC,IAAI,oIAAY,CAAC,OAAO,CAAC,WAAW,IAAI;YACtC,cAAc;QAChB;QAEA,OAAO,IAAM;IACf,GAAG,EAAE;IAEL,MAAM,OAAO,IAAA,oIAAY,EAAC,CAAA,IAAK,EAAE,IAAI;IACrC,MAAM,QAAQ,IAAA,oIAAY,EAAC,CAAA,IAAK,EAAE,KAAK;IACvC,MAAM,kBAAkB,IAAA,oIAAY,EAAC,CAAA,IAAK,EAAE,eAAe;IAE3D,OAAO;QACL;QACA;QACA,iBAAiB,aAAa,kBAAkB;QAChD,WAAW,CAAC;IACd;AACF"}},
    {"offset": {"line": 199, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/nappy-locks-front-end-development%20%282%29/lib/auth-store.ts"],"sourcesContent":["import { create } from \"zustand\"\nimport { persist } from \"zustand/middleware\"\n\nexport type UserRole = \"client\" | \"gerant\" | \"admin\" | \"superadmin\"\n\nexport interface User {\n  _id?: string\n  email: string\n  username: string\n  telephone?: string\n  role: UserRole\n  createdAt: string\n  avatar?: string\n  salonId?: string\n}\n\ninterface AuthState {\n  user: User | null\n  token: string | null;\n  isAuthenticated: boolean\n  login: (identifier: string, password: string) => Promise<boolean>\n  register: (data: Omit<User, \"id\" | \"createdAt\" | \"role\"> & { password: string }) => Promise<boolean>\n  logout: () => void\n  updateProfile: (data: Partial<User>) => Promise<boolean>\n  resetPassword: (email: string) => Promise<boolean>\n}\n// Mock API calls - Replace with real API\n\n\nexport const useAuthStore = create<AuthState>()(\n  persist(\n    (set, get) => ({\n      user: null,\n      token: null,\n      isAuthenticated: false,\n\n      login: async (identifier, password) => {\n        try {\n          const res = await fetch(\"http://localhost:3500/api/login\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({ identifier, password }),\n          });\n\n          const data = await res.json();\n          if (!res.ok) throw new Error(data.message);\n\n          set({\n            user: data.user,\n            token: data.token,\n            isAuthenticated: true,\n          });\n\n          return true;\n        } catch (err) {\n          console.error(\"Login error:\", err);\n          return false;\n        }\n      },\n\n      register: async (userData) => {\n        try {\n          const res = await fetch(\"http://localhost:3500/api/register\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify(userData),\n          });\n\n          const data = await res.json();\n          if (!res.ok) throw new Error(data.message);\n\n          set({\n            user: data.user,\n            token: data.token,\n            isAuthenticated: true,\n          });\n\n          return true;\n        } catch (err) {\n          console.error(\"Register error:\", err);\n          return false;\n        }\n      },\n\n      logout: () => {\n        set({ user: null, token: null, isAuthenticated: false });\n      },\n\n      updateProfile: async (userData) => {\n        try {\n          const token = get().token;\n          if (!token) return false;\n\n          const res = await fetch(\"http://localhost:3500/api/me1\", {\n            method: \"PUT\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${token}`,\n            },\n            body: JSON.stringify(userData),\n          });\n\n          const data = await res.json();\n          if (!res.ok) throw new Error(data.message);\n\n          set({ user: data.user });\n          return true;\n        } catch (error) {\n          console.error(\"Update profile error:\", error);\n          return false;\n        }\n      },\n\n      resetPassword: async () => true,\n    }),\n    {\n      name: \"nappylocks-auth\",\n      partialize: (state) => ({\n        user: state.user,\n        token: state.token,\n        isAuthenticated: state.isAuthenticated,\n      }),\n      // SUPPRIME CETTE LIGNE :\n      // skipHydration: true,\n    }\n  )\n);\n\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AA4BO,MAAM,eAAe,IAAA,kJAAM,IAChC,IAAA,wJAAO,EACL,CAAC,KAAK,MAAQ,CAAC;QACb,MAAM;QACN,OAAO;QACP,iBAAiB;QAEjB,OAAO,OAAO,YAAY;YACxB,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,mCAAmC;oBACzD,QAAQ;oBACR,SAAS;wBAAE,gBAAgB;oBAAmB;oBAC9C,MAAM,KAAK,SAAS,CAAC;wBAAE;wBAAY;oBAAS;gBAC9C;gBAEA,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,KAAK,OAAO;gBAEzC,IAAI;oBACF,MAAM,KAAK,IAAI;oBACf,OAAO,KAAK,KAAK;oBACjB,iBAAiB;gBACnB;gBAEA,OAAO;YACT,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,gBAAgB;gBAC9B,OAAO;YACT;QACF;QAEA,UAAU,OAAO;YACf,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,sCAAsC;oBAC5D,QAAQ;oBACR,SAAS;wBAAE,gBAAgB;oBAAmB;oBAC9C,MAAM,KAAK,SAAS,CAAC;gBACvB;gBAEA,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,KAAK,OAAO;gBAEzC,IAAI;oBACF,MAAM,KAAK,IAAI;oBACf,OAAO,KAAK,KAAK;oBACjB,iBAAiB;gBACnB;gBAEA,OAAO;YACT,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,mBAAmB;gBACjC,OAAO;YACT;QACF;QAEA,QAAQ;YACN,IAAI;gBAAE,MAAM;gBAAM,OAAO;gBAAM,iBAAiB;YAAM;QACxD;QAEA,eAAe,OAAO;YACpB,IAAI;gBACF,MAAM,QAAQ,MAAM,KAAK;gBACzB,IAAI,CAAC,OAAO,OAAO;gBAEnB,MAAM,MAAM,MAAM,MAAM,iCAAiC;oBACvD,QAAQ;oBACR,SAAS;wBACP,gBAAgB;wBAChB,eAAe,CAAC,OAAO,EAAE,OAAO;oBAClC;oBACA,MAAM,KAAK,SAAS,CAAC;gBACvB;gBAEA,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,KAAK,OAAO;gBAEzC,IAAI;oBAAE,MAAM,KAAK,IAAI;gBAAC;gBACtB,OAAO;YACT,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,yBAAyB;gBACvC,OAAO;YACT;QACF;QAEA,eAAe,UAAY;IAC7B,CAAC,GACD;IACE,MAAM;IACN,YAAY,CAAC,QAAU,CAAC;YACtB,MAAM,MAAM,IAAI;YAChB,OAAO,MAAM,KAAK;YAClB,iBAAiB,MAAM,eAAe;QACxC,CAAC;AAGH"}},
    {"offset": {"line": 301, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/nappy-locks-front-end-development%20%282%29/lib/cart-store.ts"],"sourcesContent":["\"use client\"\n\nimport { create } from \"zustand\"\nimport { persist } from \"zustand/middleware\"\n\ninterface CartItem {\n  id: string\n  name: string\n  price: number\n  quantity: number\n  image: string\n}\n\ninterface CartStore {\n  items: CartItem[]\n  addItem: (item: Omit<CartItem, \"quantity\">) => void\n  removeItem: (id: string) => void\n  updateQuantity: (id: string, quantity: number) => void\n  clearCart: () => void\n  getTotalItems: () => number\n  getTotalPrice: () => number\n}\n\nexport const useCartStore = create<CartStore>()(\n  persist(\n    (set, get) => ({\n      items: [],\n\n      addItem: (item) => {\n        set((state) => {\n          const existingItem = state.items.find((i) => i.id === item.id)\n\n          if (existingItem) {\n            return {\n              items: state.items.map((i) => (i.id === item.id ? { ...i, quantity: i.quantity + 1 } : i)),\n            }\n          }\n\n          return {\n            items: [...state.items, { ...item, quantity: 1 }],\n          }\n        })\n      },\n\n      removeItem: (id) => {\n        set((state) => ({\n          items: state.items.filter((item) => item.id !== id),\n        }))\n      },\n\n      updateQuantity: (id, quantity) => {\n        if (quantity <= 0) {\n          get().removeItem(id)\n          return\n        }\n\n        set((state) => ({\n          items: state.items.map((item) => (item.id === id ? { ...item, quantity } : item)),\n        }))\n      },\n\n      clearCart: () => {\n        set({ items: [] })\n      },\n\n      getTotalItems: () => {\n        return get().items.reduce((total, item) => total + item.quantity, 0)\n      },\n\n      getTotalPrice: () => {\n        return get().items.reduce((total, item) => total + item.price * item.quantity, 0)\n      },\n    }),\n    {\n      name: \"nappylocks-cart\",\n    },\n  ),\n)\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAuBO,MAAM,eAAe,IAAA,kJAAM,IAChC,IAAA,wJAAO,EACL,CAAC,KAAK,MAAQ,CAAC;QACb,OAAO,EAAE;QAET,SAAS,CAAC;YACR,IAAI,CAAC;gBACH,MAAM,eAAe,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK,EAAE;gBAE7D,IAAI,cAAc;oBAChB,OAAO;wBACL,OAAO,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK,EAAE,GAAG;gCAAE,GAAG,CAAC;gCAAE,UAAU,EAAE,QAAQ,GAAG;4BAAE,IAAI;oBACzF;gBACF;gBAEA,OAAO;oBACL,OAAO;2BAAI,MAAM,KAAK;wBAAE;4BAAE,GAAG,IAAI;4BAAE,UAAU;wBAAE;qBAAE;gBACnD;YACF;QACF;QAEA,YAAY,CAAC;YACX,IAAI,CAAC,QAAU,CAAC;oBACd,OAAO,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK;gBAClD,CAAC;QACH;QAEA,gBAAgB,CAAC,IAAI;YACnB,IAAI,YAAY,GAAG;gBACjB,MAAM,UAAU,CAAC;gBACjB;YACF;YAEA,IAAI,CAAC,QAAU,CAAC;oBACd,OAAO,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC,OAAU,KAAK,EAAE,KAAK,KAAK;4BAAE,GAAG,IAAI;4BAAE;wBAAS,IAAI;gBAC7E,CAAC;QACH;QAEA,WAAW;YACT,IAAI;gBAAE,OAAO,EAAE;YAAC;QAClB;QAEA,eAAe;YACb,OAAO,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,OAAO,OAAS,QAAQ,KAAK,QAAQ,EAAE;QACpE;QAEA,eAAe;YACb,OAAO,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,OAAO,OAAS,QAAQ,KAAK,KAAK,GAAG,KAAK,QAAQ,EAAE;QACjF;IACF,CAAC,GACD;IACE,MAAM;AACR"}},
    {"offset": {"line": 369, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/nappy-locks-front-end-development%20%282%29/lib/theme-store.ts"],"sourcesContent":["import { create } from \"zustand\"\nimport { persist } from \"zustand/middleware\"\n\ninterface ThemeStore {\n  theme: \"light\" | \"dark\"\n  toggleTheme: () => void\n  setTheme: (theme: \"light\" | \"dark\") => void\n}\n\nexport const useThemeStore = create<ThemeStore>()(\n  persist(\n    (set) => ({\n      theme: \"light\",\n      toggleTheme: () =>\n        set((state) => {\n          const newTheme = state.theme === \"light\" ? \"dark\" : \"light\"\n          if (typeof window !== \"undefined\") {\n            document.documentElement.classList.toggle(\"dark\", newTheme === \"dark\")\n          }\n          return { theme: newTheme }\n        }),\n      setTheme: (theme) => {\n        set({ theme })\n        if (typeof window !== \"undefined\") {\n          document.documentElement.classList.toggle(\"dark\", theme === \"dark\")\n        }\n      },\n    }),\n    {\n      name: \"theme-storage\",\n    },\n  ),\n)\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAQO,MAAM,gBAAgB,IAAA,kJAAM,IACjC,IAAA,wJAAO,EACL,CAAC,MAAQ,CAAC;QACR,OAAO;QACP,aAAa,IACX,IAAI,CAAC;gBACH,MAAM,WAAW,MAAM,KAAK,KAAK,UAAU,SAAS;gBACpD;;gBAGA,OAAO;oBAAE,OAAO;gBAAS;YAC3B;QACF,UAAU,CAAC;YACT,IAAI;gBAAE;YAAM;YACZ;;QAGF;IACF,CAAC,GACD;IACE,MAAM;AACR"}},
    {"offset": {"line": 401, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/nappy-locks-front-end-development%20%282%29/lib/apiEmployees.ts"],"sourcesContent":["import { Employee } from \"@/types/Employee\";\r\n\r\n// Routes adaptées à ton backend actuel\r\nconst BASE_URL = \"http://localhost:3500/api\";\r\n\r\nexport async function fetchEmployees(): Promise<Employee[]> {\r\n  try {\r\n    const res = await fetch(`${BASE_URL}/getallemployee`);\r\n    if (!res.ok) {\r\n      console.error(\"Erreur API fetchEmployees:\", res.statusText);\r\n      return [];\r\n    }\r\n    const data = await res.json();\r\n\r\n    // Si le backend renvoie { data: [...] }, on retourne data.data\r\n    if (Array.isArray(data)) return data;\r\n    if (Array.isArray(data.data)) return data.data;\r\n\r\n    return [];\r\n  } catch (err) {\r\n    console.error(\"Erreur fetchEmployees:\", err);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function addEmployee(data: Partial<Employee>): Promise<Employee> {\r\n  const res = await fetch(`${BASE_URL}/createemployee`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(data),\r\n  });\r\n  return res.json();\r\n}\r\n\r\nexport async function updateEmployee(id: string, data: Partial<Employee>): Promise<Employee> {\r\n  const res = await fetch(`${BASE_URL}/update/${id}`, {\r\n    method: \"PATCH\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(data),\r\n  });\r\n  return res.json();\r\n}\r\n\r\nexport async function deleteEmployee(id: string): Promise<{ success: boolean }> {\r\n  const res = await fetch(`${BASE_URL}/delete/${id}`, {\r\n    method: \"DELETE\",\r\n  });\r\n  return res.json();\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAEA,uCAAuC;AACvC,MAAM,WAAW;AAEV,eAAe;IACpB,IAAI;QACF,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,eAAe,CAAC;QACpD,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,QAAQ,KAAK,CAAC,8BAA8B,IAAI,UAAU;YAC1D,OAAO,EAAE;QACX;QACA,MAAM,OAAO,MAAM,IAAI,IAAI;QAE3B,+DAA+D;QAC/D,IAAI,MAAM,OAAO,CAAC,OAAO,OAAO;QAChC,IAAI,MAAM,OAAO,CAAC,KAAK,IAAI,GAAG,OAAO,KAAK,IAAI;QAE9C,OAAO,EAAE;IACX,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,EAAE;IACX;AACF;AAEO,eAAe,YAAY,IAAuB;IACvD,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,eAAe,CAAC,EAAE;QACpD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,eAAe,EAAU,EAAE,IAAuB;IACtE,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,QAAQ,EAAE,IAAI,EAAE;QAClD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,eAAe,EAAU;IAC7C,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,QAAQ,EAAE,IAAI,EAAE;QAClD,QAAQ;IACV;IACA,OAAO,IAAI,IAAI;AACjB"}},
    {"offset": {"line": 460, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/nappy-locks-front-end-development%20%282%29/app/admin/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { Button } from \"@/components/ui/button\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport { Menu } from \"lucide-react\"\nimport { Sidebar } from \"@/components/superadmin/sidebar\"\nimport { StatsCards } from \"@/components/superadmin/stats-cards\"\nimport { UsersTab } from \"@/components/superadmin/users-tab\"\nimport { ProductsTab } from \"@/components/superadmin/products-tab\"\nimport { BookingsTab } from \"@/components/superadmin/bookings-tab\"\nimport { SettingsTab } from \"@/components/superadmin/settings-tab\"\nimport { OverviewTab } from \"@/components/superadmin/overview-tab\"\nimport { LogsTab } from \"@/components/superadmin/logs-tab\"\nimport { SalonsTab } from \"@/components/superadmin/salons-tab\"\nimport { Header } from \"@/components/navigation/header\"\nimport { useAuthSafe } from \"@/hooks/useAuthSafe\"\nimport { useAuthStore, type User } from \"@/lib/auth-store\"\nimport { Product } from \"@/types/product\"\nimport { ServicesTab } from \"@/components/superadmin/service-tab\"\nimport { StaffTab } from \"@/components/superadmin/staff-tab\"\nimport { ClientsTab } from \"@/components/manager/clients-tab\"\n\n\n\n\ninterface Salon {\n  id: string\n  nom: string\n  address: string\n  pays: string\n  ville: string\n  telephone: string\n  gerantId: string\n  email: string\n  status: \"active\" | \"inactive\"\n  createdAt: string\n}\n\n\nconst mockBookings = [\n  { id: \"1\", clientName: \"Marie Dubois\", service: \"Coupe + Coloration\", salonName: \"NappyLocks - Centre Ville\", date: \"2025-12-05\", time: \"14:00\", status: \"confirmed\" as const, price: 85 },\n  { id: \"2\", clientName: \"Paul Martin\", service: \"Coiffure Locks\", salonName: \"NappyLocks - Le Marais\", date: \"2025-12-05\", time: \"15:30\", status: \"pending\" as const, price: 120 },\n  { id: \"3\", clientName: \"Sophie Laurent\", service: \"Défrisage\", salonName: \"NappyLocks - Centre Ville\", date: \"2025-12-04\", time: \"10:00\", status: \"completed\" as const, price: 95 },\n]\n\nconst mockLogs = [\n  { id: \"1\", type: \"success\" as const, message: \"Nouvelle réservation créée\", user: \"Sophie Admin\", timestamp: \"2025-12-02 14:23:45\" },\n  { id: \"2\", type: \"warning\" as const, message: \"Stock faible détecté\", user: \"Système\", timestamp: \"2025-12-02 13:15:22\" },\n]\n\nexport default function SuperAdminDashboard() {\n  const router = useRouter()\n  const { toast } = useToast()\n  const { user, isAuthenticated, isLoading } = useAuthSafe()\n\n  const [salons, setSalons] = useState<Salon[]>([])\n  const [products, setProducts] = useState<Product[]>([])\n  const [bookings] = useState(mockBookings)\n  const [logs] = useState(mockLogs)\n  const [users, setUsers] = useState<User[]>([]) // Temporaire, en attendant le vrai type\n  const [sidebarOpen, setSidebarOpen] = useState(false)\n  const [activeTab, setActiveTab] = useState(\"overview\")\n\n  // Charger les utilisateurs au montage (une seule fois)\n  useEffect(() => {\n    const fetchUsers = async () => {\n      const token = useAuthStore.getState().token\n      if (!token) return\n      try {\n        const res = await fetch(\"http://localhost:3500/api/admin/users\", {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        })\n        const data = await res.json()\n\n        if (res.ok) {\n          setUsers(data.users || data) // selon la structure de ta réponse\n        } else {\n          toast({\n            title: \"Erreur\",\n            description: data.message || \"Impossible de charger les utilisateurs\",\n            variant: \"destructive\",\n          })\n        }\n      } catch (err) {\n        toast({\n          title: \"Erreur réseau\",\n          description: \"Vérifie que ton serveur est lancé\",\n          variant: \"destructive\",\n        })\n      }\n    }\n    if (isAuthenticated && user?.role === \"superadmin\") {\n      fetchUsers()\n    }\n  }, [isAuthenticated, user, toast])\n\n  // Protection + redirection\n  useEffect(() => {\n    if (isLoading) return\n    if (!isAuthenticated || user?.role !== \"superadmin\") {\n      router.replace(\"/auth/login\")\n    }\n  }, [isLoading, isAuthenticated, user, router])\n\nuseEffect(() => {\n  const fetchProducts = async () => {\n    const token = useAuthStore.getState().token\n    if (!token) return\n\n    try {\n      const res = await fetch(\"http://localhost:3500/api/getAllproduit\", {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      const data = await res.json()\n\n      if (res.ok) {\n        // Assurez-vous que data.produits est un tableau\n        setProducts(Array.isArray(data) ? data : [])\n      } else {\n        toast({\n          title: \"Erreur\",\n          description: data.message || \"Impossible de charger les produits\",\n          variant: \"destructive\",\n        })\n      }\n    } catch (err) {\n      toast({\n        title: \"Erreur réseau\",\n        description: \"Vérifie que ton serveur est lancé\",\n        variant: \"destructive\",\n      })\n    }\n  }\n\n  if (isAuthenticated && user?.role === \"superadmin\") {\n    fetchProducts()\n  }\n}, [isAuthenticated, user, toast])\n\n\n\n\n  const handleDeleteProduct = (id: string) => {\n    setProducts(prev => prev.filter(p => p._id !== id))\n    toast({ title: \"Supprimé\", description: \"Produit supprimé\" })\n  }\n\n  // Loader pendant hydratation\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-4 border-purple-600\"></div>\n      </div>\n    )\n  }\n\n  if (!isAuthenticated || user?.role !== \"superadmin\") return null\n\n// Loader\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-4 border-purple-600\"></div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"flex h-screen bg-background\">\n      {/* Sidebar sans prop user → il utilise useAuthSafe à l'intérieur */}\n      <Sidebar\n        activeTab={activeTab}\n        sidebarOpen={sidebarOpen}\n        onTabChange={setActiveTab}\n        onClose={() => setSidebarOpen(false)}\n      />\n\n      <div className=\"flex-1 flex flex-col\">\n        {/* Bouton menu mobile */}\n        <div className=\"flex items-center justify-between border-b border-border px-4 py-3 lg:hidden\">\n          <Button variant=\"ghost\" size=\"icon\" onClick={() => setSidebarOpen(true)}>\n            <Menu className=\"w-5 h-5\" />\n          </Button>\n        </div>\n\n        <Header />\n\n        <main className=\"flex-1 overflow-y-auto p-6\">\n          <div className=\"max-w-7xl mx-auto\">\n            <div className=\"mb-8\">\n              <h1 className=\"text-4xl font-bold\">Tableau de bord SuperAdmin</h1>\n              <p className=\"text-muted-foreground\">Gestion complète de la plateforme NappyLocks</p>\n            </div>\n\n            {activeTab === \"overview\" && (\n              <>\n                <div className=\"mb-8\">\n                  <StatsCards users={users} salons={salons} monthlyRevenue={48520} todayBookings={87} />\n                </div>\n                <OverviewTab />\n              </>\n            )}\n\n            {activeTab === \"users\" && (\n              <UsersTab\n                users={users}\n                onAddUser={() => { }}\n                onEditUser={() => { }}\n                onDeleteUser={() => { }}\n                onExport={() => { }}\n              />\n            )}\n\n            {activeTab === \"salons\" && (\n              <SalonsTab\n                users={users}\n                salons={salons}\n                onSalonCreated={(salon) => setSalons(prev => [...prev, salon])}\n              />\n            )}\n\n            {activeTab === \"products\" && (\n              <ProductsTab products={products} onDeleteProduct={handleDeleteProduct} />\n            )}\n\n            {activeTab === \"services\" && <ServicesTab />}\n            {activeTab === \"staff\" && <StaffTab/>}\n            {activeTab === \"clients\" && <ClientsTab/> }\n\n            {activeTab === \"bookings\" && <BookingsTab bookings={bookings} onUpdateStatus={() => { }} />}\n            {activeTab === \"logs\" && <LogsTab logs={logs} />}\n            {activeTab === \"settings\" && <SettingsTab onRefresh={() => toast({ title: \"Rafraîchi !\" })} />}\n          </div>\n        </main>\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"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"}}]
}